Metadata-Version: 2.4
Name: flower_market_ai
Version: 0.1.0
Summary: Flower market data cleaning, forecasting and procurement decision system.
Author-email: Your Name <you@example.com>
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: pandas>=2.2.0
Requires-Dist: numpy>=1.26.0
Requires-Dist: psycopg2-binary>=2.9.11
Requires-Dist: pydantic>=2.6.0
Requires-Dist: pydantic-settings>=2.3.0
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: scikit-learn>=1.4.0
Requires-Dist: lightgbm>=4.5.0
Requires-Dist: tqdm>=4.66.0
Requires-Dist: fastapi>=0.115.0
Requires-Dist: uvicorn[standard]>=0.30.0
Requires-Dist: matplotlib>=3.8.0
Requires-Dist: seaborn>=0.12.0
Requires-Dist: matplotlib>=3.8.0
Requires-Dist: graphviz>=0.20.0
Requires-Dist: openpyxl>=3.1.2
Provides-Extra: dev
Requires-Dist: pytest>=8.0.0; extra == "dev"
Requires-Dist: black>=24.4.0; extra == "dev"
Requires-Dist: ruff>=0.6.0; extra == "dev"
Requires-Dist: isort>=5.13.0; extra == "dev"
Requires-Dist: pre-commit>=3.8.0; extra == "dev"

# ğŸŒ¸ flower_market_ai

**é²œèŠ±å¸‚åœº AI ç³»ç»Ÿï¼šä»åŸå§‹è¡Œæƒ…æ•°æ®åˆ°æ™ºèƒ½é‡‡è´­å†³ç­–çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚**

`flower_market_ai` é¢å‘é²œèŠ±æ‰¹å‘ / é›†æ•£å¸‚åœºæ•°æ®åœºæ™¯ï¼Œå¯¹ PostgreSQL ä¸­çš„ `fm_market_price`ï¼ˆç”±åŸå§‹ `market_price` è¿ç§»è€Œæ¥ï¼‰è¿›è¡Œå®Œæ•´çš„æ•°æ®æ²»ç†ä¸å»ºæ¨¡ï¼Œå®Œæˆï¼š

1. **æ•°æ®è´¨é‡æå‡**ï¼šC1 åˆæ­¥æ¸…æ´—ã€D ç¼ºå¤±è¡¥å…¨ã€C2 å¼‚å¸¸æ£€æµ‹  
2. **ä»·æ ¼æŒ‡æ•°æ„å»ºï¼ˆEï¼‰**ï¼šå…¨å¸‚åœº / å“ç±» / å“ç§ VWAP æŒ‡æ•° + æ¶¨è·Œå¹…  
3. **é¢„æµ‹èƒ½åŠ›ï¼ˆA/Bï¼‰**ï¼šçŸ­æœŸä»·æ ¼é¢„æµ‹ + æˆäº¤é‡é¢„æµ‹ï¼ˆ1/2/3 æ—¥ï¼‰  
4. **æ™ºèƒ½å†³ç­–ï¼ˆFï¼‰**ï¼šåŸºäºé¢„æµ‹å’Œä¸šåŠ¡è§„åˆ™ç”ŸæˆåŠ¨æ€é‡‡è´­å»ºè®®  

> ç›®æ ‡ï¼šæŠŠåŸå§‹çš„ `market_price` è¡¨ï¼Œå‡çº§ä¸ºä¸€ä¸ª**å¯ç›´æ¥æ”¯æ’‘ä¸šåŠ¡å†³ç­–çš„ AI ä¸­å°**ï¼Œè€Œä¸æ˜¯â€œåªèƒ½åšæŠ¥è¡¨çš„å†å²æ•°æ®â€ã€‚

---

## ğŸ§± æ ¸å¿ƒæ•°æ®è¡¨ï¼š`fm_market_price` ç®€è¦è¯´æ˜

> å®é™…è¡¨ç»“æ„åœ¨ `db/schema.sql` ä¸­ï¼Œè¿™é‡Œæ˜¯ç®€åŒ–è¯´æ˜ã€‚

- `ts`ï¼šäº¤æ˜“æ—¥æœŸ  
- `variety`ï¼šå…·ä½“å“ç§ï¼ˆå¦‚ï¼šçº¢ç«ç‘° 60cmï¼‰  
- `grade`ï¼šå“è´¨ç­‰çº§ï¼ˆA/B/ç²¾å“ç­‰ï¼‰  
- `market_name`ï¼šå¸‚åœºåç§°ï¼ˆå¦‚ï¼šæ–—å—èŠ±å¸‚ï¼‰  
- `retail_price`ï¼šé›¶å”®ä»·ï¼ˆç»Ÿä¸€ä¸ºâ€œæ”¯â€å•ä½åçš„ä»·æ ¼ï¼‰  
- `volume`ï¼šæˆäº¤é‡  
- `classify_name`ï¼šå“ç±»å¤§ç±»ï¼ˆç«ç‘°/åº·ä¹ƒé¦¨/ç™¾åˆç­‰ï¼‰  
- `spec`ï¼šè§„æ ¼ï¼ˆå¦‚ï¼š10æ”¯/æ‰ï¼‰  
- `stem_length_cm`ï¼šèŠ±æ†é•¿åº¦ï¼ˆå˜ç±³ï¼‰  
- `color`ï¼šé¢œè‰²  
- `product_id`ï¼šå•†å“ ID  
- `place`ï¼šäº§åœ°  
- `shop_name`ï¼šå•†æˆ· / æ¡£å£å  
- `unit`ï¼šå•ä½ï¼ˆæ¸…æ´—åç»Ÿä¸€ä¸ºâ€œæ”¯â€ï¼‰  
- å…¶ä»–å¯¼å…¥ / æ¸…æ´—è¾…åŠ©å­—æ®µ  

å¤§éƒ¨åˆ†æ¨¡å‹ä¼šå›´ç»• `(ts, product_id, variety, classify_name, shop_name, color, grade, spec)` åšæ—¶é—´åºåˆ—å»ºæ¨¡ã€‚

---

## ğŸ¯ æ¨¡å—èƒ½åŠ›ä¸€è§ˆï¼ˆC1 / D / C2 / E / FE / A / B / Fï¼‰

| æ­¥éª¤ | æ¨¡å— | ä¸»è¦èƒ½åŠ› |
|------|------|----------|
| **C1** | `preliminary_cleaning` | åˆæ­¥æ¸…æ´—ï¼šåˆ å¹½çµå­—æ®µã€ç»Ÿä¸€å•ä½ï¼ˆæ‰â†’æ”¯ï¼‰ã€ä¿®æ­£ä»·æ ¼ / æ•°é‡æ˜¾æ€§é”™è¯¯ |
| **D**  | `missing_value_filling` | æ•´å¤©ç¼ºå¤±è¡¥å…¨ï¼šæŒ‰å•†å“åºåˆ—è¡¥é½ç¼ºå¤±æ—¥æœŸï¼Œçº¿æ€§æ’å€¼ä»·æ ¼/æ•°é‡ï¼Œå¹¶ç”Ÿæˆè´¨é‡æŠ¥å‘Š |
| **C2** | `outlier_detection` | å¼ºæ¸…æ´—ï¼šåŸºäºæ—¶é—´åºåˆ—çš„å¼‚å¸¸æ£€æµ‹ï¼ˆZ-score/IQR ç­‰ï¼‰ï¼Œæ ‡è®°å¼‚å¸¸ä»·æ ¼/æ•°é‡ |
| **E**  | `basic_analysis/price_index` | èŠ±ä»·æŒ‡æ•°ï¼šå…¨å¸‚åœº / å“ç±» / å“ç§ VWAPï¼ŒåŠæŒ‡æ•°æ”¶ç›Šç‡ |
| **FE** | `prediction_models/common/feature_engineering` | ç‰¹å¾å·¥ç¨‹ï¼šæ—¶é—´ç‰¹å¾ã€æ»åç‰¹å¾ã€æ»šåŠ¨çª—å£ã€æŒ‡æ•°ç‰¹å¾ã€æ ‡ç­¾æ„é€  |
| **A**  | `short_term_price_pred` | çŸ­æœŸä»·æ ¼é¢„æµ‹ï¼šæœªæ¥ 1/2/3 æ—¥ä»·æ ¼é¢„æµ‹ï¼ˆLightGBMï¼‰ |
| **B**  | `volume_pred` | çŸ­æœŸæˆäº¤é‡é¢„æµ‹ï¼šæœªæ¥ 1/2/3 æ—¥æˆäº¤é‡é¢„æµ‹ï¼ˆLightGBMï¼‰ |
| **F**  | `business_decision` | åŠ¨æ€é‡‡è´­å»ºè®®ï¼šç»¼åˆ A/B/æŒ‡æ•°/è§„åˆ™ï¼Œè¾“å‡ºå¢è´­/å‡è´­/è§‚æœ›å»ºè®® |

---

## ğŸ§© ç³»ç»Ÿæ¶æ„å›¾ï¼ˆæ•°æ®æµè§†è§’ï¼‰

```mermaid
flowchart TD

    A[PostgreSQL\nfm_market_price åŸå§‹æ•°æ®] --> B[C1 åˆæ­¥æ¸…æ´—\npreliminary_cleaning]
    B --> C[D æ•´å¤©ç¼ºå¤±è¡¥å…¨\nmissing_value_filling]
    C --> D[C2 å¼ºæ¸…æ´—ï¼ˆå¼‚å¸¸æ£€æµ‹ï¼‰\noutlier_detection]
    D --> E[E èŠ±ä»·æŒ‡æ•°\nbasic_analysis]
    D --> FE[ç‰¹å¾å·¥ç¨‹\nfeature_engineering]
    E --> FE
    FE --> F[A çŸ­æœŸä»·æ ¼é¢„æµ‹\nshort_term_price_pred]
    FE --> G[B æˆäº¤é‡é¢„æµ‹\nvolume_pred]
    F --> H[F åŠ¨æ€é‡‡è´­å»ºè®®\nbusiness_decision]
    G --> H
    H --> I[API è¾“å‡º\nprice/volume/procurement]
    H --> J[CSV è¾“å‡º\næ¯æ—¥é‡‡è´­æ¸…å•]
ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„ï¼ˆé€é¡¹æ ‡æ³¨è¯´æ˜ï¼‰
ä¸‹é¢æ˜¯å½“å‰é¡¹ç›®çš„å®Œæ•´ç›®å½•æ ‘ï¼Œæ¯ä¸€è¡Œåé¢éƒ½æœ‰ä¸­æ–‡å¤‡æ³¨ï¼Œå¯ç›´æ¥ç²˜è´´åˆ°æ–‡æ¡£ä¸­ä½¿ç”¨ã€‚

text
å¤åˆ¶ä»£ç 
flower_market_ai/
â”œâ”€â”€ .env                               # å½“å‰ç¯å¢ƒç¯å¢ƒå˜é‡ï¼ˆæœ¬åœ°å¼€å‘/æµ‹è¯•é…ç½®ï¼‰
â”œâ”€â”€ .env.example                       # ç¯å¢ƒå˜é‡ç¤ºä¾‹æ¨¡æ¿ï¼Œå¤åˆ¶åä¿®æ”¹ä¸º .env ä½¿ç”¨
â”œâ”€â”€ .gitignore                         # Git å¿½ç•¥è§„åˆ™ï¼ˆvenvã€æ•°æ®ç¼“å­˜ã€æ—¥å¿—ã€IDE ç­‰ï¼‰
â”œâ”€â”€ .pre-commit-config.yaml            # pre-commit é’©å­é…ç½®ï¼šæ ¼å¼åŒ–/é™æ€æ£€æŸ¥
â”œâ”€â”€ pyproject.toml                     # Python é¡¹ç›®é…ç½®ï¼ˆä¾èµ–ã€å·¥å…·ã€æ‰“åŒ…ï¼‰
â”œâ”€â”€ README.md                          # é¡¹ç›®æ€»è¯´æ˜ï¼ˆä½ æ­£åœ¨çœ‹çš„è¿™ä¸ªæ–‡ä»¶ï¼‰
â”œâ”€â”€ requirements.txt                   # pip ä¾èµ–æ¸…å•ï¼ˆä¸ä½¿ç”¨ poetry æ—¶ç”¨ï¼‰
â”œâ”€â”€ run_pipeline.py                    # ä¸€é”®è·‘å…¨æµç¨‹è„šæœ¬ï¼ˆC1â†’Dâ†’C2â†’Eâ†’FEâ†’A/Bâ†’Fï¼‰
â”‚
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ __init__.py                    # ä½¿ config æˆä¸º Python åŒ…
â”‚   â”œâ”€â”€ logging.conf                   # logging é…ç½®ï¼ˆæ—¥å¿—æ ¼å¼/ç­‰çº§/è¾“å‡ºåˆ°æ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ README.md                      # é…ç½®ç›®å½•ä½¿ç”¨è¯´æ˜
â”‚   â””â”€â”€ settings.py                    # å…¨å±€é…ç½®å…¥å£ï¼ˆè·¯å¾„ã€DBã€æ¨¡å‹è·¯å¾„ç­‰ï¼‰
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ intermediate/                  # ä¸­é—´æ•°æ®ï¼ˆç‰¹å¾ã€æŒ‡æ•°ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”‚   â”œâ”€â”€ category_features.csv  # ç±»åˆ«æ˜ å°„è¡¨ï¼ˆå“ç§/å“ç±»/é¢œè‰²/å•†æˆ·ç­‰ç¼–ç ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ time_series_features.csv # ç‰¹å¾å·¥ç¨‹è¾“å‡ºçš„æ—¶é—´åºåˆ—ç‰¹å¾çŸ©é˜µ
â”‚   â”‚   â””â”€â”€ indices/
â”‚   â”‚       â””â”€â”€ flower_price_index.csv # E æ­¥è¾“å‡ºçš„å¤šå±‚çº§èŠ±ä»·æŒ‡æ•°ï¼ˆall/classify/varietyï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ output/                        # é¢å‘ä¸šåŠ¡/å‰ç«¯çš„æœ€ç»ˆè¾“å‡ºç»“æœ
â”‚   â”‚   â”œâ”€â”€ price_prediction_result.csv   # A æ­¥ï¼šéªŒè¯é›†ä»·æ ¼é¢„æµ‹ç»“æœï¼ˆå« y_true/y_predï¼‰
â”‚   â”‚   â”œâ”€â”€ volume_prediction_result.csv  # B æ­¥ï¼šéªŒè¯é›†æˆäº¤é‡é¢„æµ‹ç»“æœï¼ˆé¢„ç•™/å¯æ‰©å±•ï¼‰
â”‚   â”‚   â””â”€â”€ procurement_suggestion.csv    # F æ­¥ï¼šåŠ¨æ€é‡‡è´­å»ºè®®ç»“æœï¼ˆå¢è´­/å‡è´­/è§‚æœ›ç­‰ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ processed/                     # æ¸…æ´—é“¾è·¯äº§ç‰©ï¼ˆC1/D/C2ï¼‰
â”‚   â”‚   â”œâ”€â”€ market_price_prelim_clean.csv # C1 åˆæ­¥æ¸…æ´—ç»“æœï¼ˆç»Ÿä¸€å•ä½ã€åˆ å¹½çµå­—æ®µï¼‰
â”‚   â”‚   â”œâ”€â”€ market_price_filled.csv      # D æ•´å¤©ç¼ºå¤±è¡¥å…¨ç»“æœï¼ˆå«è¡¥å…¨æ ‡è®°ï¼‰
â”‚   â”‚   â””â”€â”€ market_price_cleaned.csv     # C2 å¼ºæ¸…æ´—ç»“æœï¼ˆå«å¼‚å¸¸æ ‡è®°ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ raw/
â”‚   â”‚   â””â”€â”€ market_price_raw.csv       # åŸå§‹å¯¼å‡ºæ•°æ®ï¼ˆå¯é€‰ï¼›é€šå¸¸æ¥è‡ª DB å¯¼å‡ºï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ db/
â”‚       â””â”€â”€ schema.sql                 # PostgreSQL è¡¨ç»“æ„å®šä¹‰ï¼ˆfm_market_price ç­‰ï¼‰
â”‚
â”œâ”€â”€ db/
â”‚   â””â”€â”€ schema.sql                     # åŒä¸Šï¼ˆä¸ºæ–¹ä¾¿ IDE å±•ç¤ºï¼Œä¹Ÿæ”¾åœ¨æ ¹çº§ db/ ä¸‹ï¼‰
â”‚
â”œâ”€â”€ deploy/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ prod_config.py             # ç”Ÿäº§ç¯å¢ƒä¸“ç”¨é…ç½®ï¼ˆè¦†ç›–é»˜è®¤ settingsï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ cron_job/
â”‚   â”‚   â””â”€â”€ run_daily.sh               # Linux å®šæ—¶è„šæœ¬ç¤ºä¾‹ï¼ˆæ¯æ—¥æ‰§è¡Œ pipelineï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ docker/
â”‚   â”‚   â”œâ”€â”€ docker-compose.yml         # Docker Compose é…ç½®ï¼ˆæœ¬åœ°å¤šæœåŠ¡ç¼–æ’ï¼‰
â”‚   â”‚   â””â”€â”€ Dockerfile                 # åº”ç”¨é•œåƒæ„å»ºæ–‡ä»¶
â”‚   â”‚
â”‚   â””â”€â”€ k8s/
â”‚       â”œâ”€â”€ cronjob_daily_pipeline.yaml# K8s CronJobï¼šå®šæ—¶è·‘æ¯æ—¥æ•°æ®å¤„ç†+é¢„æµ‹
â”‚       â”œâ”€â”€ deployment.yaml            # K8s Deploymentï¼šAPI æœåŠ¡/ä»»åŠ¡éƒ¨ç½²
â”‚       â””â”€â”€ service.yaml               # K8s Serviceï¼šæš´éœ² API æœåŠ¡å…¥å£
â”‚
â”œâ”€â”€ monitoring/
â”‚   â”œâ”€â”€ alert_rules_example.yaml       # Prometheus å‘Šè­¦è§„åˆ™ç¤ºä¾‹
â”‚   â”œâ”€â”€ grafana_dashboard_example.json # Grafana ä»ªè¡¨ç›˜ç¤ºä¾‹é…ç½®ï¼ˆç›‘æ§ä»·æ ¼/å»¶è¿Ÿç­‰ï¼‰
â”‚   â””â”€â”€ monitoring_readme.md           # ç›‘æ§ä½“ç³»ä½¿ç”¨è¯´æ˜
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ ä¸šåŠ¡è§„åˆ™.md                    # å„æ­¥éª¤æ¸…æ´—ã€å¼‚å¸¸å®šä¹‰ã€ä¸šåŠ¡è§„åˆ™è¯´æ˜
â”‚   â”œâ”€â”€ æ•°æ®å­—å…¸.md                    # å­—æ®µå«ä¹‰ã€æ¥æºã€å–å€¼èŒƒå›´è¯´æ˜
â”‚   â”œâ”€â”€ æ¨¡å‹è®¾è®¡æ–‡æ¡£.md                # C1â†’Dâ†’C2â†’Eâ†’FEâ†’A æ¨¡å‹è®¾è®¡ä¸ç‰¹å¾è¯´æ˜
â”‚   â”œâ”€â”€ ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ.md                # ç³»ç»Ÿæ¶æ„å›¾ã€å±‚æ¬¡åˆ’åˆ†ã€æ•°æ®æµè¯´æ˜
â”‚   â”œâ”€â”€ è¿ç»´æ‰‹å†Œ.md                    # æ—¥å¸¸è¿ç»´æ“ä½œï¼šæ—¥å¿—å®šä½ã€é‡è·‘æµç¨‹ç­‰
â”‚   â””â”€â”€ ç¨‹åºæ‰‹å†Œ.md                    # ç¨‹åºå…¥å£ã€è„šæœ¬è¯´æ˜ã€API è°ƒç”¨æ–¹å¼
â”‚
â”œâ”€â”€ logs/
â”‚   â”œâ”€â”€ business_decision.log          # ä¸šåŠ¡å†³ç­–æ¨¡å—è¿è¡Œæ—¥å¿—
â”‚   â”œâ”€â”€ data_processing.log            # C1/D/C2 ç­‰æ•°æ®å¤„ç†æµæ°´çº¿æ—¥å¿—
â”‚   â””â”€â”€ prediction.log                 # æ¨¡å‹è®­ç»ƒ/é¢„æµ‹ç›¸å…³æ—¥å¿—
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ artifacts/                     # å·²è®­ç»ƒå¥½çš„æ¨¡å‹æ–‡ä»¶ï¼ˆæŒ‰ç‰ˆæœ¬/ä»»åŠ¡åˆ’åˆ†ï¼‰
â”‚   â”‚   â”œâ”€â”€ price_model_v1/
â”‚   â”‚   â”‚   â”œâ”€â”€ metadata.json          # å½“å‰ä»·æ ¼æ¨¡å‹ç‰ˆæœ¬æ€»å…ƒä¿¡æ¯
â”‚   â”‚   â”‚   â”œâ”€â”€ metadata_1d.json       # 1 æ—¥ä»·æ ¼æ¨¡å‹å…ƒä¿¡æ¯ï¼ˆå‚æ•°ã€ç‰¹å¾åˆ—è¡¨ç­‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ metadata_2d.json       # 2 æ—¥ä»·æ ¼æ¨¡å‹å…ƒä¿¡æ¯
â”‚   â”‚   â”‚   â”œâ”€â”€ metadata_3d.json       # 3 æ—¥ä»·æ ¼æ¨¡å‹å…ƒä¿¡æ¯
â”‚   â”‚   â”‚   â”œâ”€â”€ model.pkl              # é»˜è®¤ä»·æ ¼æ¨¡å‹ï¼ˆé€šå¸¸æŒ‡ 1 æ—¥æ¨¡å‹ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ model_1d.pkl           # 1 æ—¥ä»·æ ¼ LightGBM æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ model_2d.pkl           # 2 æ—¥ä»·æ ¼ LightGBM æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ model_3d.pkl           # 3 æ—¥ä»·æ ¼ LightGBM æ¨¡å‹
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ volume_model_v1/
â”‚   â”‚       â”œâ”€â”€ metadata.json          # æˆäº¤é‡æ¨¡å‹å…ƒä¿¡æ¯
â”‚   â”‚       â””â”€â”€ model.pkl              # æˆäº¤é‡é¢„æµ‹æ¨¡å‹ï¼ˆ1/2/3 æ—¥ï¼Œå¯å…±ç”¨ä¸€ä¸ªæˆ–å¤šæ¨¡å‹ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ experiments/
â”‚   â”‚   â”œâ”€â”€ price_experiments.csv      # ä»·æ ¼æ¨¡å‹å®éªŒè®°å½•ï¼ˆæ‰‹å·¥/Optuna è°ƒå‚ç»“æœï¼‰
â”‚   â”‚   â””â”€â”€ volume_experiments.csv     # æˆäº¤é‡æ¨¡å‹å®éªŒè®°å½•
â”‚   â”‚
â”‚   â””â”€â”€ reports/
â”‚       â”œâ”€â”€ c2_outlier_quality_report.pdf  # C2 å¼‚å¸¸æ£€æµ‹è´¨é‡è¯„ä¼° PDF æŠ¥å‘Š
â”‚       â”œâ”€â”€ d_filling_quality_report.pdf   # D ç¼ºå¤±è¡¥å…¨è´¨é‡è¯„ä¼° PDF æŠ¥å‘Š
â”‚       â”œâ”€â”€ price_index_visual_report.pdf  # E èŠ±ä»·æŒ‡æ•°å¯è§†åŒ–æŠ¥å‘Š
â”‚       â””â”€â”€ price_model_eval_report.pdf    # A ä»·æ ¼é¢„æµ‹æ¨¡å‹è¯„ä¼°æŠ¥å‘Šï¼ˆè¯¯å·®åˆ†å¸ƒã€æ•£ç‚¹å›¾ç­‰ï¼‰
â”‚
â”œâ”€â”€ reports/                         # ä¸ºæ–¹ä¾¿è®¿é—®ï¼Œreports ä¹Ÿåœ¨æ ¹çº§æŒ‚ä¸€ä»½ï¼ˆæŒ‡å‘åŒä¸€ç›®å½•ï¼‰
â”‚   â”œâ”€â”€ c2_outlier_quality_report.pdf
â”‚   â”œâ”€â”€ d_filling_quality_report.pdf
â”‚   â”œâ”€â”€ price_index_visual_report.pdf
â”‚   â””â”€â”€ price_model_eval_report.pdf
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                         # FastAPI Web å±‚ï¼šå¯¹å¤– REST æ¥å£
â”‚   â”‚   â”œâ”€â”€ __init__.py              # API åŒ…æ ‡è®°
â”‚   â”‚   â”œâ”€â”€ auth.py                  # ç®€å•é‰´æƒ/Token æ ¡éªŒï¼ˆå¦‚éœ€è¦ï¼‰
â”‚   â”‚   â”œâ”€â”€ dependencies.py          # ä¾èµ–æ³¨å…¥ï¼ˆDB è¿æ¥ã€æ¨¡å‹åŠ è½½ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ main.py                  # FastAPI app å…¥å£ï¼ˆæŒ‚è½½å„ä¸ªè·¯ç”±ï¼‰
â”‚   â”‚   â”œâ”€â”€ price_pred_api.py        # ä»·æ ¼é¢„æµ‹æ¥å£è·¯ç”±ï¼ˆè°ƒç”¨çŸ­æœŸä»·æ ¼æ¨¡å‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ volume_pred_api.py       # æˆäº¤é‡é¢„æµ‹æ¥å£è·¯ç”±
â”‚   â”‚   â””â”€â”€ procurement_api.py       # é‡‡è´­å»ºè®®æ¥å£è·¯ç”±
â”‚   â”‚
â”‚   â”œâ”€â”€ basic_analysis/              # E æ­¥ï¼šä»·æ ¼æŒ‡æ•°ä¸åŸºç¡€åˆ†æ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ price_index_core.py      # èŠ±ä»·æŒ‡æ•°è®¡ç®—æ ¸å¿ƒé€»è¾‘ï¼ˆVWAPã€æ”¶ç›Šç‡ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ price_index_visual_report.py # èŠ±ä»·æŒ‡æ•°å¯è§†åŒ–è„šæœ¬ï¼ˆç”Ÿæˆ PDFï¼‰
â”‚   â”‚   â””â”€â”€ run.py                   # ä¸€é”®æ‰§è¡Œä»·æ ¼æŒ‡æ•°è®¡ç®—å…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ business_decision/           # F æ­¥ï¼šä¸šåŠ¡å†³ç­–æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ procurement_core.py      # é‡‡è´­å»ºè®®ç®—æ³•ï¼ˆç»“åˆé¢„æµ‹ç»“æœ+ä¸šåŠ¡è§„åˆ™ï¼‰
â”‚   â”‚   â””â”€â”€ run.py                   # ç”Ÿæˆé‡‡è´­å»ºè®® CSV çš„æ‰§è¡Œå…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ data_processing/             # C1 / D / C2 æ•°æ®é¢„å¤„ç†æµæ°´çº¿
â”‚   â”‚   â”œâ”€â”€ missing_value_filling/
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ core.py              # D æ­¥ï¼šæ•´å¤©ç¼ºå¤±è¡¥å…¨ä¸»é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ d_filling_quality_report.py # ç”Ÿæˆ D æ­¥è´¨é‡è¯„ä¼° PDF
â”‚   â”‚   â”‚   â””â”€â”€ run.py               # ç¼ºå¤±è¡¥å…¨æ‰§è¡Œå…¥å£
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ outlier_detection/
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ core.py              # C2 æ­¥ï¼šå¼‚å¸¸æ£€æµ‹ & æ ‡è®°é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ report.py            # ç”Ÿæˆ C2 å¼‚å¸¸æ£€æµ‹è´¨é‡è¯„ä¼° PDF
â”‚   â”‚   â”‚   â””â”€â”€ run.py               # C2 æ‰§è¡Œå…¥å£ï¼ˆå†™å‡º market_price_cleaned.csvï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ preliminary_cleaning/
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ core.py              # C1 æ­¥ï¼šåˆæ­¥æ¸…æ´—é€»è¾‘ï¼ˆåˆ å­—æ®µã€ç»Ÿä¸€å•ä½ç­‰ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ run.py               # C1 æ‰§è¡Œå…¥å£ï¼ˆå†™å‡º prelim_clean.csvï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ prediction_models/           # A/Bï¼šé¢„æµ‹æ¨¡å‹ç›¸å…³ä»£ç 
â”‚   â”‚   â”œâ”€â”€ common/                  # ä»·æ ¼ & æˆäº¤é‡æ¨¡å‹å…±ç”¨å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ behavior_feature_learning.py # è¡Œä¸ºç‰¹å¾å­¦ä¹ ï¼ˆé¢„ç•™/å¯æ‰©å±•ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ data_loader.py       # åŠ è½½æ¸…æ´—åæ•°æ® & æŒ‡æ•°æ•°æ®
â”‚   â”‚   â”‚   â”œâ”€â”€ feature_engineering.py # ç‰¹å¾å·¥ç¨‹ä¸»è„šæœ¬ï¼ˆFEï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ model_evaluation.py  # æ¨¡å‹è¯„ä¼°ä¸ PDF æŠ¥å‘Šç”Ÿæˆè„šæœ¬
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ short_term_price_pred/   # A æ­¥ï¼šçŸ­æœŸä»·æ ¼é¢„æµ‹æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ model_predict.py     # åœ¨éªŒè¯é›†ä¸Šåšå›æµ‹é¢„æµ‹ï¼Œç”Ÿæˆ result CSV
â”‚   â”‚   â”‚   â”œâ”€â”€ model_predict_future.py # åŸºäºæœ€æ–°ç‰¹å¾åšâ€œçœŸå®æœªæ¥æ¨ç†â€
â”‚   â”‚   â”‚   â”œâ”€â”€ model_train.py       # ä»·æ ¼æ¨¡å‹è®­ç»ƒè„šæœ¬ï¼ˆæ—¶é—´åˆ‡åˆ† + LightGBMï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ run.py               # ä»·æ ¼é¢„æµ‹ä¸€é”®æµç¨‹å…¥å£ï¼ˆå¯é€‰ï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ volume_pred/             # B æ­¥ï¼šæˆäº¤é‡é¢„æµ‹æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ model_predict.py     # æˆäº¤é‡é¢„æµ‹å›æµ‹è„šæœ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ model_train.py       # æˆäº¤é‡æ¨¡å‹è®­ç»ƒè„šæœ¬
â”‚   â”‚   â”‚   â””â”€â”€ run.py               # æˆäº¤é‡é¢„æµ‹ä¸€é”®æµç¨‹å…¥å£
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                       # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ data_utils.py            # DataFrame å·¥å…·å‡½æ•°ã€é€šç”¨å¤„ç†é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ db_utils.py              # DB è¿æ¥å·¥å…·ï¼ˆè¯»å– fm_market_price ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ log_utils.py             # æ—¥å¿—åˆå§‹åŒ–å°è£…
â”‚   â”‚   â”œâ”€â”€ migrate_to_fm_market_price.py # ä»åŸå§‹ market_price è¿ç§»åˆ° fm_market_price çš„å·¥å…·
â”‚   â”‚   â””â”€â”€ time_utils.py            # æ—¶é—´ç›¸å…³å·¥å…·å‡½æ•°ï¼ˆæ—¥æœŸç”Ÿæˆ/å¯¹é½ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ tests/                       # Pytest å•å…ƒæµ‹è¯•ç›®å½•
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ test_business_decision.py# æµ‹è¯•é‡‡è´­å»ºè®®é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ test_data_processing.py  # æµ‹è¯• C1/D/C2 å¤„ç†æµç¨‹
â”‚   â”‚   â””â”€â”€ test_prediction_models.py# æµ‹è¯• A/B æ¨¡å‹è®­ç»ƒä¸é¢„æµ‹
â”‚   â”‚
â”‚   â””â”€â”€ __init__.py                  # ä½¿ src æˆä¸º Python åŒ…
â”‚
â””â”€â”€ flower_market_ai.egg-info/       # pip å®‰è£…æ—¶ç”Ÿæˆçš„å…ƒæ•°æ®ï¼ˆæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ï¼‰
    â”œâ”€â”€ PKG-INFO
    â”œâ”€â”€ SOURCES.txt
    â”œâ”€â”€ dependency_links.txt
    â”œâ”€â”€ requires.txt
    â””â”€â”€ top_level.txt
ğŸ”§ å‘½ä»¤é€ŸæŸ¥ï¼ˆæŒ‰æµæ°´çº¿é¡ºåºï¼‰
é»˜è®¤åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œä¸”å·²æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š.\.venv\Scripts\activate

bash
å¤åˆ¶ä»£ç 
# 0. å°†åŸå§‹æ•°æ®åº“æ•°æ®è¿ç§»åˆ° fm_market_price
python -m src.utils.migrate_to_fm_market_price

# 1. C1 åˆæ­¥æ•°æ®æ¸…æ´—
python -m src.data_processing.preliminary_cleaning.run

# 2. D æ•´å¤©ç¼ºå¤±è¡¥å…¨
python -m src.data_processing.missing_value_filling.run
# 2.1 è¡¥å…¨è´¨é‡è¯„ä¼°æŠ¥å‘Š
python -m src.data_processing.missing_value_filling.d_filling_quality_report

# 3. C2 å¼‚å¸¸æ£€æµ‹ / å¼ºæ¸…æ´—
python -m src.data_processing.outlier_detection.run
# 3.1 å¼‚å¸¸æ£€æµ‹è´¨é‡è¯„ä¼°æŠ¥å‘Š
python -m src.data_processing.outlier_detection.report

# 4. E èŠ±ä»·æŒ‡æ•°è®¡ç®— + å¯è§†åŒ–
python -m src.basic_analysis.run
python -m src.basic_analysis.price_index_visual_report

# 5. ç‰¹å¾å·¥ç¨‹ï¼ˆFeature Engineeringï¼‰
python -m src.prediction_models.common.feature_engineering

# 6. Aï¼šçŸ­æœŸä»·æ ¼é¢„æµ‹ï¼ˆè®­ç»ƒ + å›æµ‹ + è¯„ä¼°ï¼‰
python -m src.prediction_models.short_term_price_pred.model_train
python -m src.prediction_models.short_term_price_pred.model_predict
python -m src.prediction_models.common.model_evaluation

# 7. Bï¼šæˆäº¤é‡é¢„æµ‹ï¼ˆé¢„ç•™/å¯æŒ‰åŒæ ·æ¨¡å¼æ¥å…¥ï¼‰
python -m src.prediction_models.short_term_price_pred.model_predict
å°†ä»·æ ¼é¢„æµ‹æ³¨å…¥ç‰¹å¾ï¼ˆä¾›æ–¹æ¡ˆ A ä½¿ç”¨ï¼‰
python -m src.prediction_models.common.inject_pred_price_feature
è®­ç»ƒæˆäº¤é‡æ¨¡å‹ A / B
python -m src.prediction_models.volume_pred.model_train_A
python -m src.prediction_models.volume_pred.model_train_B
ç”Ÿæˆ A / B éªŒè¯é›†é¢„æµ‹ç»“æœ
python -m src.prediction_models.volume_pred.model_predict_A
python -m src.prediction_models.volume_pred.model_predict_B
ç”Ÿæˆæˆäº¤é‡è¯„ä¼° PDFï¼ˆA/B å„ä¸€ä»½ï¼‰
python -m src.prediction_models.common.volume_model_evaluation

# 8. Fï¼šé‡‡è´­å»ºè®®ç”Ÿæˆ
python -m src.business_decision.run
ä¹Ÿå¯ä»¥ç”¨ä¸€æ¡å‘½ä»¤è·‘å…¨æµç¨‹ï¼ˆè§† run_pipeline.py çš„é…ç½®è€Œå®šï¼‰ï¼š

bash
å¤åˆ¶ä»£ç 
python run_pipeline.py
âš™ï¸ å¿«é€Ÿå¼€å§‹ï¼ˆQuick Startï¼‰
å…‹éš†é¡¹ç›®

bash
å¤åˆ¶ä»£ç 
git clone <your-repo-url>/flower_market_ai.git
cd flower_market_ai
åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–

bash
å¤åˆ¶ä»£ç 
python -m venv .venv
# Windows
.\.venv\Scripts\activate
# Mac / Linux
# source .venv/bin/activate

pip install -r requirements.txt
é…ç½® .env

å¤åˆ¶ .env.example ä¸º .envï¼Œå¹¶å¡«å†™æ•°æ®åº“ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š

env
å¤åˆ¶ä»£ç 
ENV=dev
DB_HOST=localhost
DB_PORT=5432
DB_NAME=postgres
DB_USER=postgres
DB_PASSWORD=postgres
è¿è¡Œæµæ°´çº¿

å‚è€ƒä¸Šé¢çš„ å‘½ä»¤é€ŸæŸ¥ï¼Œæˆ–ç›´æ¥ï¼š

bash
å¤åˆ¶ä»£ç 
python run_pipeline.py
ğŸŒ å¯åŠ¨ API æœåŠ¡ï¼ˆFastAPIï¼‰
bash
å¤åˆ¶ä»£ç 
uvicorn src.api.main:app --reload
è®¿é—®ï¼š

Swagger UI: http://127.0.0.1:8000/docs

Redoc: http://127.0.0.1:8000/redoc

ğŸ§ª è¿è¡Œæµ‹è¯•
bash
å¤åˆ¶ä»£ç 
pytest -q
ğŸ¤ è´¡çŒ®è§„èŒƒ
æäº¤å‰å»ºè®®æ‰§è¡Œï¼špre-commit run --all-files å’Œ pytest

ä»£ç é£æ ¼ï¼šblack + isort + ruff

æ‰€æœ‰æ–°æ¨¡å—å°½é‡ï¼š

æœ‰ docstring

æœ‰è‡³å°‘ 1 ä¸ª pytest ç”¨ä¾‹

åœ¨ docs/æ¨¡å‹è®¾è®¡æ–‡æ¡£.md æˆ– docs/ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ.md ä¸­è¡¥å……è¯´æ˜

